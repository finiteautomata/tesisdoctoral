
\begin{figure}[t]
    \centering
    \includegraphics[width=0.6\textwidth]{img/hateval_confusion_matrix.pdf}
    \caption{Error analysis of the model}
    \label{fig:hateval_error_analysis}
\end{figure}


Para tener una mejor idea de lo ocurrido con nuestros clasificadores, realizamos un análisis de error. Para ello, tomamos el clasificador BETO con clasificación múltiple, y lo aplicamos sobre el dataset de test. Para intentar mitigar los efectos de la varianza de los clasificadores, tomamos las salidas de 10 clasificadores BETO entrenados con una distinta semilla y analizamos el error sobre un clasificador de ensamble por voto mayoritario; de esta manera, tratamos de buscar aquellos errores frecuentes, aquellos que la mayoría de los 10 clasificadores erran. Nos centraremos en observar los errores de la etiqueta HS, y particularmente veremos qué pasa con los falsos positivos. La figura \ref{fig:hateval_error_analysis} muestra la matriz de confusión de nuestros clasificadores. Como era de esperar (dado que la precisión es más baja que la sensitividad) tenemos muchos falsos positivos, por lo cual haremos eje en observar estos.


\begin{table}
    \begin{tabularx}{\columnwidth}{l l X}
        Etiqueta & Motivo   &  Tweet \\
        \hline
         \mr{7}{No HS} &\mr{7}{Uso irónico o apropiación cultural} & Una cosa que le pasó a una amiga mexicana en Barcelona. Una chica repartía flyers en castellano y catalán, le dio uno a mí amiga en catalán y al segundo se lo quitó y se lo dio en castellano. -No, déjalo que entiendo catalán -Ah, es que como te he visto cara de sudaca Racismo 0 URL \\
                    &        & @saludhernandezm Esas personas que extrañan dictaduras, cualquier dictadura, aún más si son las ibéricas que ponen como eje a Madrid; su cultura, política e idioma sobre la idiosincrasia de los demás. Esos mismos que añoran a Franco y viven en un país 'Sudaca' creyéndose dueños de la verdad.	 \\
                    &        & @caciena después sigo siendo un sudaca pero bueno \\
                    &        & @ArturoMonteduro Pues tienes toda la razón del mundo. Y lo peor es que seguro que tenía papeles y DNI español, pero queda mejor decir "argelino" o "uno d'estos del top manta", "puto inmigrante", o "moro mierda" y ya pues matas dos pájaros de un tiro. \\
                    &        & Obvio me ofendo cuando algn Sudaca hace algn comentario presuponiendo que los mexicanos somos feos, o que el pas est de la verga. Entre mexicanos podemos hablar mierda de Mxico, pero que a ningn pinche extranjero se le ocurra, porque va a haber pedo! \\
                    &        & TODOS LOS INMIGRANTES Y GITANOS FUERA!!! Menos: el colombiano que me vende coca, el negro que me consigue putas, el moro que me pasa costo y el gitano que me vende maría. \\
                    &        & Ayer nos fuimos a tomar algo con los cumpas: Dos españoles, un ponja, un africano y un sudaca. Estamos para campaña de United Colours of Benneton. \\
                    \hline
                    %& Overfitting a keywords & Los fascistas salen de la ratonera para atacar a los 100 inmigrantes que han logrado saltar la valla de Ceuta. Asco de prensa y partidos políticos que se pelean por lograr los votos de los fascistas. Ningún ser humano es ilegal. \#Ceuta \#FelizMiércoles https://t.co/iAIqTj9qmi
                    %&                       & @saludhernandezm Esas personas que extrañan dictaduras, cualquier dictadura, aún más si son las ibéricas que ponen como eje a Madrid; su cultura, política e idioma sobre la idiosincrasia de los demás. Esos mismos que añoran a Franco y viven en un país 'Sudaca' creyéndose dueños de la verdad. \\
            \hline
    \end{tabularx}

    \caption{Errores de etiquetado. En la columna Etiqueta mostramos la etiqueta asignada en el dataset}
    \label{tab:hateval_error_analysis}
\end{table}


En la tabla \ref{tab:hateval_error_analysis} podemos observar algunos de los errores que cometen nuestros clasificadores. Por un lado, podemos observar que algunos errores se deben a cierto overfitting a ciertas palabras ``clave'', muchas de las cuales son producto del proceso de recolección que está fuertemente basada en keywords (inmigrante, sudaca, por ejemplo). Haciendo un poco de probing en los clasificadores, podemos ver que ciertas palabras como ``inmigrante'' automáticamente disparan una salida odiosa.

Otros de los casos que nuestros clasificadores no parecieran detectar son los reportes de discriminación (por ejemplo...) o casos de apropiación cultural o contenido irónico (\emph{ Ayer nos fuimos a tomar algo con los cumpas: Dos españoles, un ponja, un africano y un sudaca. Estamos para campaña de United Colours of Benneton.}). Estos casos dan cuenta de la dificultad de la detección de esta tarea.

Así mismo, en el proceso del análisis de error descubrimos algunos tweets a los cuales pareciera faltar contexto para poder tomar una decisión. Si bien esto a veces puede ser inferido por un humano (por ejemplo, infiriendo que un comentario habla de tal o cual suceso), un clasificador necesitaría esa información. Para el dataset en concreto, muchos de estos comentarios tienen un contexto implícito: muchos tweets hablan de incidentes en la frontera de Ceuta (España) entre inmigrantes y la policía, debido al proceso de recolección realizado. La tabla \ref{tab:hateval_lack_of_context} muestra algunos de estos ejemplos.


Por otro lado, en la tabla YYY podemos observar que el dataset contiene



\begin{table}
    \begin{tabularx}{\textwidth}{l X}
        Etiqueta      & Tweet \\
        \hline
        \mr{13}{No HS} & - @ArturoMonteduro Pues tienes toda la razón del mundo. Y lo peor es que seguro que tenía papeles y DNI español, pero queda mejor decir ``argelino'' o ``uno d'estos del top manta'', ``puto inmigrante'', o ``moro mierda'' y ya pues matas dos pájaros de un tiro.      \\
                      & @UbedaJoseA @WalkingDead\_AMC Perro cállate ala puta       \\
                      & @iancandado Es sudaca como.tu       \\
                      & @Stopfalsasdenun Pero que tienes en la cabesaaaa?(con voz de sudaca de mierda)       \\
                      & @\_Lassana\_ Me la has puesto como un tanque apuntando a un campanario negrata		       \\
                      & @odiomistweets Es una analogía pendejo sudaca	       \\
                      & @MifasolMaite Sudaca? K racista eres \\
                      & @ElQuemaMarias te parece que un sudaca tatuado excelentemente bien dotado y carismático no es buen ejemplo?       \\
                      & @HQGatica @AnglicaVillarN1 Este sueco con cara de bolita .xq eso es este aspiracional desclasado . x dignidad debería irse . no lo hará xq este sudaca no la tiene !!!       \\
                      & @SOFIAGAVIRIAC Ambas cosas y Sudaca (lo que eso signifique)       \\
                      & @SleeplessXenn @envdiaN Este finde te recojo y vamos al barrio negrata de envdian       \\
                      & @elmundoes El q quería quitar concertinas y luego quitarse a los inmigrantes !!       \\
                      & @AlexTor1975 @sanchezcastejon Disfràcese de moro o negro, y al momento tiene resuelto el problema de espera, de verdad, mano de santo!. Nada como ser invasor, refugiado, o inmigrante en este paraíso terrenal. Ahora, si eres nativo del paraíso!!!!, Se te puede complicar la existencia!!!!. \\
        \hline
        \mr{2}{HS}    & CALLATE YA Y HAZME LA PUTA CENA JODERRR URL \\
                      & Basta ya de buenismo, si te no respetas a la polica ni a la guardia civil en la frontera nada de concertinas, simplemente 4 tiros. Fin del problema \\
                      & @benemeritosGC La solución es fácil, muro de hormigón de 3 metros de alto, garitas cerradas para vigilancia y por delante la valla actual con concertinas. No es caro, es cuestión de quererlo hacer. \\
                      & Por desgracia, no queda otra, aportan poco y nos cuestan mucho. Incluido nuestra seguridad. \#Inmigración \#Immigration URL \\
        \hline
    \end{tabularx}
    \caption{Algunos ejemplos observados en el análisis de error que carecen de contexto conversacional.}
    \label{tab:hateval_lack_of_context}
\end{table}


Algo que observamos también es que hay una fuerte cantidad de errores de etiquetado. La tabla \ref{tab:hateval_label_errors} muestra algunos de estos ejemplos. Si bien es difícil establecer una causa específica para cada uno de estos errores, es posible que sean causados por una combinación de: confusión entre lenguaje ofensivo y discurso de odio; un mismatch cultural entre los anotadores; falta de contexto; algunos tweets que fueron mal recolectados

\begin{table}
    \begin{tabularx}{\textwidth}{l X}
        Etiqueta      & Tweet \\
        \hline
        \mr{13}{HS} &Callate la puta boca pesada @Lauu\_tb \\
           & me cansada tía cállate ya la puta boca lo que te queda de vid \\
           & FLOR SALTANDO AHÍ LA RE PUTA MADRE TE LO MERECES PEDAZO DE FORRA TE LO MERECES, EN LA CARA DE TODOS HIJA ASÍ SE HACE \\
           & Callate! cerra el orto un ratooo! es mas, no te queres morir mejor? la puta que te pario  \\
           & @csdb530 @carvasar Claro, porque la culpa la tienen las niñas embarazadas y las víctimas de acoso sexual, violación… https://t.co/f16xSqT37G \\
           & @nlopezi\_ Imbécil tu puta prima! Gilipollas! Estúpida \\
           & Esta mujer es lo más la puta madre https://t.co/8SWPhKbXQe \\
           & \#Pendejos Don't call me gringo You fuckin beaner Stay on your side Of that goddamn river Don't call me gringo You beaner No me digas beaner Mr. puñetero Te sacaré un susto Por racista y culero No me llames frijolero Pinche gringo puñetero \\
           & Mónica que te calles la puta boca \#OTGala7 \\
           & @bastadetopos Callate que me camine dosmillonesquinientas cuadras para llegar el semi. La puta que los parió a todos. \\
           & @pablocasado\_ @imbrodamelilla @TeoGarciaEgea pablo no quieren concertinas , un muro de 12 metros o mas de altura de dos plantas de pisos ,se acabo los problemas @guardiacivil @policia @EMADmde @MonarquiaEspana nadie se quejaría de nada \\
           & \#OTGala7 Noemí JAJAJAJAJAJA ESTA MUJER ES LA PUTA AMA \\
           & No puedo creer lo que le hicieron a Cersei, yo se que es una hija de puta pero ni así se merecia lo que le hicieron… https://t.co/uftkVl5ene \\
        \hline
    \end{tabularx}
    \caption{Ejemplos mal etiquetados}
\end{table}